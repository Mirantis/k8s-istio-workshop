(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{321:function(s,a,e){s.exports=e.p+"assets/img/ceph_dashboard.d29f4d99.png"},340:function(s,a,e){"use strict";e.r(a);var t=e(9),o=Object(t.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"instal-rook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#instal-rook","aria-hidden":"true"}},[s._v("#")]),s._v(" Instal Rook")]),s._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("Screencast: "),t("a",{attrs:{href:"https://asciinema.org/a/229605?autoplay=0&t=155",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://asciinema.org/a/229605?t=155"),t("OutboundLink")],1)])]),s._v(" "),t("p",[s._v("Install "),t("a",{attrs:{href:"https://rook.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Rook"),t("OutboundLink")],1),s._v(" Operator\n("),t("a",{attrs:{href:"https://ceph.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ceph"),t("OutboundLink")],1),s._v(" storage for k8s):")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("helm repo add rook-stable https://charts.rook.io/stable\nhelm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --wait --name rook-ceph --namespace rook-ceph-system rook-stable/rook-ceph\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" 40\n")])])]),t("p",[s._v("See how the rook-ceph-system should look like:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl get svc,deploy,po --namespace"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-system -o wide\n")])])]),t("p",[s._v("Output:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("NAME                                       READY   UP-TO-DATE   AVAILABLE   AGE     CONTAINERS           IMAGES             SELECTOR\ndeployment.extensions/rook-ceph-operator   1/1     1            1           3m36s   rook-ceph-operator   rook/ceph:v0.9.2   app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-operator\n\nNAME                                      READY   STATUS    RESTARTS   AGE     IP               NODE                             NOMINATED NODE   READINESS GATES\npod/rook-ceph-agent-2bxhq                 1/1     Running   0          2m14s   192.168.250.12   pruzicka-k8s-istio-workshop-node02   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-agent-8h4p4                 1/1     Running   0          2m14s   192.168.250.11   pruzicka-k8s-istio-workshop-node01   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-agent-mq69r                 1/1     Running   0          2m14s   192.168.250.13   pruzicka-k8s-istio-workshop-node03   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-operator-7478c899b5-px2hc   1/1     Running   0          3m37s   10.244.2.3       pruzicka-k8s-istio-workshop-node02   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-discover-8ffj8                   1/1     Running   0          2m14s   10.244.2.4       pruzicka-k8s-istio-workshop-node02   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-discover-l56jj                   1/1     Running   0          2m14s   10.244.1.2       pruzicka-k8s-istio-workshop-node03   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-discover-q9xwp                   1/1     Running   0          2m14s   10.244.0.4       pruzicka-k8s-istio-workshop-node01   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("p",[s._v("Create your Rook cluster:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl create -f https://raw.githubusercontent.com/rook/rook/master/cluster/examples/kubernetes/ceph/cluster.yaml\n")])])]),t("p",[s._v("Get the "),t("a",{attrs:{href:"https://rook.io/docs/rook/master/ceph-toolbox.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Toolbox"),t("OutboundLink")],1),s._v(" with ceph commands:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl create -f https://raw.githubusercontent.com/rook/rook/master/cluster/examples/kubernetes/ceph/toolbox.yaml\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" 240\n")])])]),t("p",[s._v("Check what was created in "),t("code",[s._v("rook-ceph")]),s._v(" namespace:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl get svc,deploy,po --namespace"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph -o wide\n")])])]),t("p",[s._v("Output:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("NAME                              TYPE        CLUSTER-IP      EXTERNAL-IP   PORT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    AGE     SELECTOR\nservice/rook-ceph-mgr             ClusterIP   10.103.36.128   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        9283/TCP   8m45s   app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mgr,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\nservice/rook-ceph-mgr-dashboard   ClusterIP   10.99.173.58    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        8443/TCP   8m45s   app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mgr,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\nservice/rook-ceph-mon-a           ClusterIP   10.102.39.160   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        6790/TCP   12m     app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,mon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,mon_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\nservice/rook-ceph-mon-b           ClusterIP   10.102.49.137   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        6790/TCP   11m     app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("b,mon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("b,mon_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\nservice/rook-ceph-mon-c           ClusterIP   10.96.25.143    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        6790/TCP   10m     app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c,mon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c,mon_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\n\nNAME                                    READY   UP-TO-DATE   AVAILABLE   AGE     CONTAINERS        IMAGES             SELECTOR\ndeployment.extensions/rook-ceph-mgr-a   1/1     1            1           9m33s   mgr               ceph/ceph:v13      app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mgr,ceph_daemon_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,instance"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,mgr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-mon-a   1/1     1            1           12m     mon               ceph/ceph:v13      app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,mon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,mon_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-mon-b   1/1     1            1           11m     mon               ceph/ceph:v13      app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("b,mon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("b,mon_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-mon-c   1/1     1            1           10m     mon               ceph/ceph:v13      app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c,mon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c,mon_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-osd-0   1/1     1            1           8m34s   osd               ceph/ceph:v13      app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-osd,ceph-osd-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-osd-1   1/1     1            1           8m33s   osd               ceph/ceph:v13      app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-osd,ceph-osd-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-osd-2   1/1     1            1           8m33s   osd               ceph/ceph:v13      app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-osd,ceph-osd-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("2,rook_cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-tools   1/1     1            1           12m     rook-ceph-tools   rook/ceph:master   app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-tools\n\nNAME                                                             READY   STATUS      RESTARTS   AGE     IP               NODE                             NOMINATED NODE   READINESS GATES\npod/rook-ceph-mgr-a-669f5b47fc-sjvrr                             1/1     Running     0          9m33s   10.244.1.6       pruzicka-k8s-istio-workshop-node03   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-mon-a-784f8fb5b6-zcvjr                             1/1     Running     0          12m     10.244.0.5       pruzicka-k8s-istio-workshop-node01   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-mon-b-6dfbf486f4-2ktpm                             1/1     Running     0          11m     10.244.2.5       pruzicka-k8s-istio-workshop-node02   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-mon-c-6c85f6f44-j5wwv                              1/1     Running     0          10m     10.244.1.5       pruzicka-k8s-istio-workshop-node03   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-0-6dd9cdc946-7th52                             1/1     Running     0          8m34s   10.244.1.8       pruzicka-k8s-istio-workshop-node03   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-1-64cdd77897-9vdrh                             1/1     Running     0          8m33s   10.244.2.7       pruzicka-k8s-istio-workshop-node02   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-2-67fcc446bd-skq52                             1/1     Running     0          8m33s   10.244.0.7       pruzicka-k8s-istio-workshop-node01   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-prepare-pruzicka-k8s-istio-workshop-node01-z29hj   0/2     Completed   0          8m39s   10.244.0.6       pruzicka-k8s-istio-workshop-node01   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-prepare-pruzicka-k8s-istio-workshop-node02-q8xqx   0/2     Completed   0          8m39s   10.244.2.6       pruzicka-k8s-istio-workshop-node02   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-prepare-pruzicka-k8s-istio-workshop-node03-vbwxv   0/2     Completed   0          8m39s   10.244.1.7       pruzicka-k8s-istio-workshop-node03   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-tools-76c7d559b6-s6s4l                             1/1     Running     0          12m     192.168.250.12   pruzicka-k8s-istio-workshop-node02   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("p",[s._v("Create a storage class based on the Ceph RBD volume plugin:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl create -f https://raw.githubusercontent.com/rook/rook/master/cluster/examples/kubernetes/ceph/storageclass.yaml\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" 5\n")])])]),t("p",[s._v("Set "),t("code",[s._v("rook-ceph-block")]),s._v(" as default Storage Class:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl patch storageclass rook-ceph-block -p "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{\\"metadata\\": {\\"annotations\\":{\\"storageclass.kubernetes.io/is-default-class\\":\\"true\\"}}}"')]),s._v("\n")])])]),t("p",[s._v("Check the Storage Classes:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl describe storageclass\n")])])]),t("p",[s._v("Output:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Name:                  rook-ceph-block\nIsDefaultClass:        Yes\nAnnotations:           storageclass.kubernetes.io/is-default-class"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\nProvisioner:           ceph.rook.io/block\nParameters:            blockPool"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("replicapool,clusterNamespace"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,fstype"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xfs\nAllowVolumeExpansion:  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("unset"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nMountOptions:          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nReclaimPolicy:         Delete\nVolumeBindingMode:     Immediate\nEvents:                "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("p",[s._v("See the CephBlockPool:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl describe cephblockpool --namespace"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\n")])])]),t("p",[s._v("Output:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Name:         replicapool\nNamespace:    rook-ceph\nLabels:       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nAnnotations:  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nAPI Version:  ceph.rook.io/v1\nKind:         CephBlockPool\nMetadata:\n  Creation Timestamp:  2019-02-04T09:51:55Z\n  Generation:          1\n  Resource Version:    3171\n  Self Link:           /apis/ceph.rook.io/v1/namespaces/rook-ceph/cephblockpools/replicapool\n  UID:                 8163367d-2862-11e9-a470-fa163e90237a\nSpec:\n  Replicated:\n    Size:  1\nEvents:    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("p",[s._v("Check the status of your Ceph installation:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl -n rook-ceph "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl -n rook-ceph get pod -l "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app=rook-ceph-tools"')]),s._v(" -o jsonpath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -- ceph status\n")])])]),t("p",[s._v("Output:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("  cluster:\n    id:     1f4458a6-f574-4e6c-8a25-5a5eef6eb0a7\n    health: HEALTH_OK\n\n  services:\n    mon: 3 daemons, quorum c,a,b\n    mgr: a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("active"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    osd: 3 osds: 3 up, 3 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n\n  data:\n    pools:   1 pools, 100 pgs\n    objects: 0  objects, 0 B\n    usage:   13 GiB used, 44 GiB / 58 GiB avail\n    pgs:     100 active+clean\n")])])]),t("p",[s._v("Ceph status:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl -n rook-ceph "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl -n rook-ceph get pod -l "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app=rook-ceph-tools"')]),s._v(" -o jsonpath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -- ceph osd status\n")])])]),t("p",[s._v("Output:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("+----+--------------------------------+-------+-------+--------+---------+--------+---------+-----------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("              host              "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  used "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" avail "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" wr ops "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" wr data "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rd ops "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rd data "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   state   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+----+--------------------------------+-------+-------+--------+---------+--------+---------+-----------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 0  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" pruzicka-k8s-istio-workshop-node03 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 4302M "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 15.0G "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" exists,up "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 1  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" pruzicka-k8s-istio-workshop-node02 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 4455M "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 14.8G "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" exists,up "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 2  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" pruzicka-k8s-istio-workshop-node01 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 4948M "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 14.3G "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     0   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" exists,up "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+----+--------------------------------+-------+-------+--------+---------+--------+---------+-----------+\n")])])]),t("p",[s._v("Check the cluster usage status:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl -n rook-ceph "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl -n rook-ceph get pod -l "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app=rook-ceph-tools"')]),s._v(" -o jsonpath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -- ceph "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v("\n")])])]),t("p",[s._v("Output:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("GLOBAL:\n    SIZE       AVAIL      RAW USED     %RAW USED\n    58 GiB     44 GiB       13 GiB         23.22\nPOOLS:\n    NAME            ID     USED     %USED     MAX AVAIL     OBJECTS\n    replicapool     1       0 B         0        40 GiB           0\n")])])]),t("p",[s._v("Change listening port of "),t("a",{attrs:{href:"http://docs.ceph.com/docs/mimic/mgr/dashboard/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ceph Dashboard"),t("OutboundLink")],1),s._v("\n("),t("a",{attrs:{href:"https://github.com/rook/rook/issues/2526",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/rook/rook/issues/2526"),t("OutboundLink")],1),s._v("):")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl -n rook-ceph "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exec")]),s._v(" -it "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl -n rook-ceph get pod -l "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app=rook-ceph-tools"')]),s._v(" -o jsonpath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{.items[0].metadata.name}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -- ceph config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" mgr mgr/dashboard/server_addr 0.0.0.0\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" 5\nkubectl delete pod -n rook-ceph  "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl -n rook-ceph get pod -l app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mgr -o jsonpath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" 5\n")])])]),t("div",{staticClass:"warning custom-block"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("Run the following command on your local environment to allow your browser reach\nthe pods ports.")])]),s._v(" "),t("p",[s._v("Configure port forwarding to Ceph Dashboard:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl -n rook-ceph port-forward "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl -n rook-ceph get pod -l app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mgr -o jsonpath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" 8443:8443 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),t("p",[s._v("To access the Ceph Dashboard "),t("a",{attrs:{href:"https://localhost:8443",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://localhost:8443"),t("OutboundLink")],1),s._v("\nuse username "),t("code",[s._v("admin")]),s._v(" and password can be found by running:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("kubectl -n rook-ceph get secret rook-ceph-dashboard-password -o yaml "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password:"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{print \\'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v('}"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" base64 --decode\n")])])]),t("p",[s._v("Ceph Dashboard ("),t("a",{attrs:{href:"https://localhost:8443",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://localhost:8443"),t("OutboundLink")],1),s._v("):")]),s._v(" "),t("p",[t("img",{attrs:{src:e(321),alt:"Ceph Dashboard",title:"Ceph Dashboard"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/rook/artwork/05c1bd90005958e14bbba14f983c884b1d474879/logo/Rook_Logo(Color).svg?sanitize=true",alt:"Rook",title:"Rook"}})])])},[],!1,null,null,null);a.default=o.exports}}]);