(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{264:function(s,t,a){s.exports=a.p+"assets/img/istio.a24267ed.svg"},343:function(s,t,a){"use strict";a.r(t);var e=a(9),r=Object(e.a)({},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"istio-installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#istio-installation","aria-hidden":"true"}},[s._v("#")]),s._v(" Istio - Installation")]),s._v(" "),e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("Screencast: "),e("a",{attrs:{href:"https://asciinema.org/a/229605?autoplay=0&t=275",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://asciinema.org/a/229605?t=275"),e("OutboundLink")],1)])]),s._v(" "),e("p",[s._v("Istio architectue")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/istio/istio.io/7bf371365e4a16a9a13c0e79355fe1eac7f8f99f/content/docs/concepts/what-is-istio/arch.svg?sanitize=true",alt:"Istio Architecture",title:"Istio Architecture"}})]),s._v(" "),e("p",[s._v("Either download Istio directly from "),e("a",{attrs:{href:"https://github.com/istio/istio/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/istio/istio/releases"),e("OutboundLink")],1),s._v("\nor get the latest version by using curl:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("export")]),s._v(" ISTIO_VERSION"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.6"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),s._v(" -d tmp "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" tmp\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cd")]),s._v(" tmp\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -sL https://git.io/getLatestIstio "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" sh -\n")])])]),e("p",[s._v("Change the directory to the Istio installation files location:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cd")]),s._v(" istio*\n")])])]),e("p",[s._v("Install "),e("code",[s._v("istioctl")]),s._v(":")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" bin/istioctl /usr/local/bin/\n")])])]),e("p",[s._v("Define the credentials you want to use as the Kiali username and passphrase (admin/admin):")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("export")]),s._v(" KIALI_USERNAME"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" -n "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" base64"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("export")]),s._v(" KIALI_PASSPHRASE"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" -n "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" base64"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])])]),e("p",[s._v("Create the namespace and secret:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("NAMESPACE"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("istio-system\nkubectl create namespace "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NAMESPACE")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" EOF "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" kubectl apply -f -\napiVersion: v1\nkind: Secret\nmetadata:\n  name: kiali\n  namespace: "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NAMESPACE")]),s._v("\n  labels:\n    app: kiali\ntype: Opaque\ndata:\n  username: "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KIALI_USERNAME")]),s._v("\n  passphrase: "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KIALI_PASSPHRASE")]),s._v("\nEOF\n")])])]),e("p",[s._v("Install "),e("a",{attrs:{href:"https://istio.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Istio"),e("OutboundLink")],1),s._v(" using Helm:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("helm "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --wait --name istio --namespace istio-system install/kubernetes/helm/istio \\\n  --set gateways.istio-ingressgateway.type"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NodePort \\\n  --set gateways.istio-egressgateway.type"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NodePort \\\n  --set grafana.enabled"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true \\\n  --set kiali.enabled"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true \\\n  --set kiali.dashboard.grafanaURL"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://localhost:3000 \\\n  --set kiali.dashboard.jaegerURL"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://localhost:16686 \\\n  --set servicegraph.enabled"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true \\\n  --set telemetry-gateway.grafanaEnabled"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true \\\n  --set telemetry-gateway.prometheusEnabled"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true \\\n  --set tracing.enabled"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n")])])]),e("p",[s._v("See the Istio components:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("kubectl get --namespace"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("istio-system svc,deployment,pods -o wide\n")])])]),e("p",[s._v("Output:")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("NAME                             TYPE        CLUSTER-IP       EXTERNAL-IP   PORT"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                                                                                                                   AGE   SELECTOR\nservice/grafana                  ClusterIP   10.101.117.126   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        3000/TCP                                                                                                                  15m   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("grafana\nservice/istio-citadel            ClusterIP   10.99.235.151    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        8060/TCP,9093/TCP                                                                                                         15m   istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("citadel\nservice/istio-egressgateway      NodePort    10.105.213.174   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        80:31610/TCP,443:31811/TCP                                                                                                15m   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("istio-egressgateway,istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("egressgateway\nservice/istio-galley             ClusterIP   10.110.154.0     "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        443/TCP,9093/TCP                                                                                                          15m   istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("galley\nservice/istio-ingressgateway     NodePort    10.101.212.170   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        80:31380/TCP,443:31390/TCP,31400:31400/TCP,15011:31814/TCP,8060:31435/TCP,853:31471/TCP,15030:30210/TCP,15031:30498/TCP   15m   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("istio-ingressgateway,istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ingressgateway\nservice/istio-pilot              ClusterIP   10.96.34.157     "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        15010/TCP,15011/TCP,8080/TCP,9093/TCP                                                                                     15m   istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pilot\nservice/istio-policy             ClusterIP   10.98.185.215    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        9091/TCP,15004/TCP,9093/TCP                                                                                               15m   istio-mixer-type"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("policy,istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mixer\nservice/istio-sidecar-injector   ClusterIP   10.97.47.179     "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        443/TCP                                                                                                                   15m   istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sidecar-injector\nservice/istio-telemetry          ClusterIP   10.103.23.55     "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        9091/TCP,15004/TCP,9093/TCP,42422/TCP                                                                                     15m   istio-mixer-type"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("telemetry,istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mixer\nservice/jaeger-agent             ClusterIP   None             "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        5775/UDP,6831/UDP,6832/UDP                                                                                                15m   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jaeger\nservice/jaeger-collector         ClusterIP   10.110.10.174    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        14267/TCP,14268/TCP                                                                                                       15m   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jaeger\nservice/jaeger-query             ClusterIP   10.98.172.235    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        16686/TCP                                                                                                                 15m   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jaeger\nservice/kiali                    ClusterIP   10.111.114.225   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        20001/TCP                                                                                                                 15m   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kiali\nservice/prometheus               ClusterIP   10.111.132.151   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        9090/TCP                                                                                                                  15m   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("prometheus\nservice/servicegraph             ClusterIP   10.109.59.250    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        8088/TCP                                                                                                                  15m   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("servicegraph\nservice/tracing                  ClusterIP   10.96.59.251     "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        80/TCP                                                                                                                    15m   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jaeger\nservice/zipkin                   ClusterIP   10.107.168.128   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        9411/TCP                                                                                                                  15m   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jaeger\n\nNAME                                           READY   UP-TO-DATE   AVAILABLE   AGE   CONTAINERS                 IMAGES                                                      SELECTOR\ndeployment.extensions/grafana                  1/1     1            1           15m   grafana                    grafana/grafana:5.2.3                                       app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("grafana\ndeployment.extensions/istio-citadel            1/1     1            1           15m   citadel                    docker.io/istio/citadel:1.0.5                               istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("citadel\ndeployment.extensions/istio-egressgateway      1/1     1            1           15m   istio-proxy                docker.io/istio/proxyv2:1.0.5                               app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("istio-egressgateway,istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("egressgateway\ndeployment.extensions/istio-galley             1/1     1            1           15m   validator                  docker.io/istio/galley:1.0.5                                istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("galley\ndeployment.extensions/istio-ingressgateway     1/1     1            1           15m   istio-proxy                docker.io/istio/proxyv2:1.0.5                               app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("istio-ingressgateway,istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ingressgateway\ndeployment.extensions/istio-pilot              1/1     1            1           15m   discovery,istio-proxy      docker.io/istio/pilot:1.0.5,docker.io/istio/proxyv2:1.0.5   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pilot,istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pilot\ndeployment.extensions/istio-policy             1/1     1            1           15m   mixer,istio-proxy          docker.io/istio/mixer:1.0.5,docker.io/istio/proxyv2:1.0.5   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("policy,istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mixer,istio-mixer-type"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("policy\ndeployment.extensions/istio-sidecar-injector   1/1     1            1           15m   sidecar-injector-webhook   docker.io/istio/sidecar_injector:1.0.5                      istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sidecar-injector\ndeployment.extensions/istio-telemetry          1/1     1            1           15m   mixer,istio-proxy          docker.io/istio/mixer:1.0.5,docker.io/istio/proxyv2:1.0.5   app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("telemetry,istio"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mixer,istio-mixer-type"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("telemetry\ndeployment.extensions/istio-tracing            1/1     1            1           15m   jaeger                     docker.io/jaegertracing/all-in-one:1.5                      app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jaeger\ndeployment.extensions/kiali                    1/1     1            1           15m   kiali                      docker.io/kiali/kiali:v0.10                                 app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kiali\ndeployment.extensions/prometheus               1/1     1            1           15m   prometheus                 docker.io/prom/prometheus:v2.3.1                            app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("prometheus\ndeployment.extensions/servicegraph             1/1     1            1           15m   servicegraph               docker.io/istio/servicegraph:1.0.5                          app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("servicegraph\n\nNAME                                          READY   STATUS      RESTARTS   AGE   IP            NODE                             NOMINATED NODE   READINESS GATES\npod/grafana-59b8896965-pmwd2                  1/1     Running     0          15m   10.244.1.16   pruzicka-k8s-istio-workshop-node03   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/istio-citadel-856f994c58-8r8nr            1/1     Running     0          15m   10.244.1.17   pruzicka-k8s-istio-workshop-node03   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/istio-egressgateway-5649fcf57-sv8wf       1/1     Running     0          15m   10.244.1.14   pruzicka-k8s-istio-workshop-node03   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/istio-galley-7665f65c9c-8sjmm             1/1     Running     0          15m   10.244.1.18   pruzicka-k8s-istio-workshop-node03   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/istio-grafana-post-install-kw74d          0/1     Completed   0          10m   10.244.1.19   pruzicka-k8s-istio-workshop-node03   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/istio-ingressgateway-6755b9bbf6-f7pnx     1/1     Running     0          15m   10.244.1.13   pruzicka-k8s-istio-workshop-node03   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/istio-pilot-56855d999b-6zq86              2/2     Running     0          15m   10.244.0.11   pruzicka-k8s-istio-workshop-node01   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/istio-policy-6fcb6d655f-4zndw             2/2     Running     0          15m   10.244.2.13   pruzicka-k8s-istio-workshop-node02   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/istio-sidecar-injector-768c79f7bf-74wbc   1/1     Running     0          15m   10.244.2.18   pruzicka-k8s-istio-workshop-node02   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/istio-telemetry-664d896cf5-smz7w          2/2     Running     0          15m   10.244.2.14   pruzicka-k8s-istio-workshop-node02   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/istio-tracing-6b994895fd-vb58q            1/1     Running     0          15m   10.244.2.17   pruzicka-k8s-istio-workshop-node02   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/kiali-67c69889b5-sw92h                    1/1     Running     0          15m   10.244.1.15   pruzicka-k8s-istio-workshop-node03   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/prometheus-76b7745b64-kwzj5               1/1     Running     0          15m   10.244.2.15   pruzicka-k8s-istio-workshop-node02   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/servicegraph-5c4485945b-j9bp2             1/1     Running     0          15m   10.244.2.16   pruzicka-k8s-istio-workshop-node02   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),e("p",[s._v("Configure Istio with a new log type and send those logs to the FluentD:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("kubectl apply -f "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/files/fluentd-istio.yaml\n")])])]),e("p",[s._v("Check + Enable Istio in default namespace.")]),s._v(" "),e("p",[s._v("Allow the "),e("code",[s._v("default")]),s._v(" namespace to use Istio injection:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("kubectl label namespace default istio-injection"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("enabled\n")])])]),e("p",[s._v("Check namespaces:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("kubectl get namespace -L istio-injection\n")])])]),e("p",[s._v("Output:")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("NAME               STATUS   AGE   ISTIO-INJECTION\ndefault            Active   70m   enabled\nes-operator        Active   41m\nistio-system       Active   16m\nkube-public        Active   70m\nkube-system        Active   70m\nlogging            Active   38m\nrook-ceph          Active   59m\nrook-ceph-system   Active   63m\n")])])]),e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),e("p",[s._v("Run the following command on your local environment.")])]),s._v(" "),e("p",[s._v("Configure port forwarding to Istio services:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Jaeger - http://localhost:16686")]),s._v("\nkubectl port-forward -n istio-system "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl get pod -n istio-system -l app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jaeger -o jsonpath"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" 16686:16686 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Prometheus - http://localhost:9090/graph")]),s._v("\nkubectl -n istio-system port-forward "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl -n istio-system get pod -l app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("prometheus -o jsonpath"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" 9090:9090 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Grafana - http://localhost:3000/dashboard/db/istio-mesh-dashboard")]),s._v("\nkubectl -n istio-system port-forward "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl -n istio-system get pod -l app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("grafana -o jsonpath"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" 3000:3000 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Kiali - http://localhost:20001")]),s._v("\nkubectl -n istio-system port-forward "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl -n istio-system get pod -l app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kiali -o jsonpath"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" 20001:20001 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Servicegraph - http://localhost:8088/force/forcegraph.html")]),s._v("\nkubectl -n istio-system port-forward "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl -n istio-system get pod -l app"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("servicegraph -o jsonpath"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" 8088:8088 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),e("p",[e("img",{attrs:{src:a(264),alt:"Istio",title:"Istio"}})])])},[],!1,null,null,null);t.default=r.exports}}]);